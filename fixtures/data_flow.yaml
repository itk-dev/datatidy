App\Entity\DataFlow:
    data_flow_odaa:
        enabled: false
        name: ODAA
        dataSource: '@data_source_odaa'

    data_flow_test:
        enabled: false
        name: Test
        dataSource: '@data_source_test'

App\Entity\DataTransform:
    data_flow_odaa_0:
        data_flow: '@data_flow_odaa'
        name: Select columns
        transformer: App\DataTransformer\SelectColumnsDataTransformer
        transformerOptions:
            columns: [name,birthday]
            include: true

    data_flow_odaa_1:
        data_flow: '@data_flow_odaa'
        name: Change column type
        transformer: App\DataTransformer\ChangeColumnTypeDataTransformer
        transformerOptions:
            columns: [birthday]
            type: date

    data_flow_odaa_2:
        data_flow: '@data_flow_odaa'
        name: Translate to Danish
        transformer: App\DataTransformer\RenameColumnsDataTransformer
        transformerOptions:
            renames:
                - from: name
                  to: navn
                - from: birthday
                  to: f√∏dselsdag

    data_flow_odaa_3:
        data_flow: '@data_flow_odaa'
        name: Merge in stuff
        transformer: App\DataTransformer\MergeFlowsDataTransformer
        transformerOptions:
            dataFlow: 2 # @TODO @FIXME: How to get actual id of @data_flow_test?
            joinType: 'cross'
            joinColumns: []

App\Entity\DataTarget:
    data_flow_odaa_target_file_csv:
        data_flow: '@data_flow_odaa'
        description: Send result to file
        dataTarget: App\DataTarget\DataTargetFile
        dataTargetOptions:
            filename: /tmp/output.csv
            format: csv

    data_flow_odaa_target_file_json:
        data_flow: '@data_flow_odaa'
        description: Send result to file
        dataTarget: App\DataTarget\DataTargetFile
        dataTargetOptions:
            filename: /tmp/output.json
            format: json

    # data_flow_odaa_target_sql:
    #     data_flow: '@data_flow_odaa'
    #     description: Send result to SQL
    #     dataTarget: App\DataTarget\DataTargetSQL
    #     dataTargetOptions:
    #         url: mysql://db:db@localhost:3306/datamakeup87_output
    #         tableName: b3eeb0ff-c8a8-4824-99d6-e0a3747c8b0d
    #         append: false

    #         # CREATE TABLE `b3eeb0ff-c8a8-4824-99d6-e0a3747c8b0d` (
    #         #   `t` DATETIME,
    #         #   `count` INT
    #         # ) ENGINE = InnoDB;

    # data_flow_odaa_target_ckan:
    #     data_flow: '@data_flow_odaa'
    #     description: Send result to CKAN
    #     dataTarget: App\DataTarget\DataTargetCKAN
    #     dataTargetOptions:
    #         name: 'Result from datatidy'
    #         url: '%CKAN_URL'
    #         apiKey: '%CKAN_API_KEY%'
    #         dataSetId: '%CKAN_DATA_SET_ID%'
    #         append: true
